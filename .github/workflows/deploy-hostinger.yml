name: Deploy to Hostinger VPS

on:
  push:
      branches:
            - main
              workflow_dispatch:

              jobs:
                deploy:
                    runs-on: ubuntu-latest
                        steps:
                              - name: Checkout code
                                      uses: actions/checkout@v4

                                            - name: Deploy to Hostinger VPS
                                                    uses: appleboy/ssh-action@v1.0.3
                                                            with:
                                                                      host: ${{ secrets.HOSTINGER_HOST }}
                                                                                username: ${{ secrets.HOSTINGER_USER }}
                                                                                          key: ${{ secrets.HOSTINGER_SSH_KEY }}
                                                                                                    port: 22
                                                                                                              script: |
                                                                                                                          cd /var/www/mvai-connexx
                                                                                                                                      git fetch origin main
                                                                                                                                                  git reset --hard origin/main
                                                                                                                                                              source venv/bin/activate
                                                                                                                                                                          pip install -r requirements.txt
                                                                                                                                                                                      sudo systemctl restart mvai-connexx
                                                                                                                                                                                                  echo "Deployment complete!"
