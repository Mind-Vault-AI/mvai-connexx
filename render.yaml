# MVAI Connexx - Render Deployment Configuration
# Enterprise-grade multi-tenant platform
# Contact: info@mindvault-ai.com
# URL: https://mvai-connexx.onrender.com

services:
  - type: web
    name: mvai-connexx
    runtime: docker
    plan: free
    region: frankfurt  # EU region for GDPR compliance
    branch: claude/mvai-connexx-multi-tenant-upgrade-8eDvw
    dockerfilePath: ./Dockerfile
    dockerContext: .
    
    # Health check endpoint
    healthCheckPath: /login
    
    # Auto-deploy on push
    autoDeploy: true
    
    # Environment variables
    envVars:
      - key: FLASK_ENV
        value: production
      
      - key: PORT
        value: 5000
      
      - key: SECRET_KEY
        generateValue: true  # Auto-generated secure key
      
      - key: DOMAIN
        value: mindvault-ai.com
      
      - key: COMPANY_EMAIL
        value: info@mindvault-ai.com
      
      - key: ENABLE_THREAT_DETECTION
        value: true
      
      - key: ENABLE_HONEYPOT
        value: true
      
      - key: ENABLE_AI_ASSISTANT
        value: true
      
      - key: ENABLE_DEMO_MODE
        value: true
      
      - key: TARGET_UPTIME_PCT
        value: 99.9
      
      - key: TARGET_RESPONSE_TIME_MS
        value: 200
      
      # Optional: Configure these in Render dashboard for production
      # - key: SMTP_SERVER
      #   value: smtp.gmail.com
      # - key: SMTP_PORT
      #   value: 587
      # - key: SMTP_USERNAME
      #   sync: false  # Set in Render dashboard
      # - key: SMTP_PASSWORD
      #   sync: false  # Set in Render dashboard (use secret)
      # - key: STRIPE_PUBLIC_KEY
      #   sync: false
      # - key: STRIPE_SECRET_KEY
      #   sync: false
      # - key: SENTRY_DSN
      #   sync: false

# Optional: Add database for persistent storage (Render PostgreSQL)
# databases:
#   - name: mvai-connexx-db
#     plan: free
#     region: frankfurt
